/* cria */
CREATE TABLE agendamento (id SERIAL NOT NULL, inicio date NOT NULL, fim date NOT NULL, participantes int4 NOT NULL, Instituicaoid int4 NOT NULL, exposicaoid int4, PRIMARY KEY (id));
CREATE TABLE autor (id SERIAL NOT NULL, descricao varchar(40) NOT NULL, PRIMARY KEY (id));
CREATE TABLE colecao (id SERIAL NOT NULL, descricao varchar(40) NOT NULL, PRIMARY KEY (id));
CREATE TABLE colecaoItem (objetoid int4 NOT NULL, colecaoid int4 NOT NULL, PRIMARY KEY (objetoid, colecaoid));
CREATE TABLE composicao (id SERIAL NOT NULL, objetoid int4 NOT NULL, objetoid2 int4 NOT NULL, PRIMARY KEY (id));
CREATE TABLE emprestimo (id SERIAL NOT NULL, pessoaid int4 NOT NULL, PRIMARY KEY (id));
CREATE TABLE exposicao (id SERIAL NOT NULL, descricao varchar(40) NOT NULL, inicio date NOT NULL, fim date, localizacaoid int4 NOT NULL, PRIMARY KEY (id));
CREATE TABLE exposicaoItem (exposicaoid int4 NOT NULL, objetoid int4 NOT NULL, PRIMARY KEY (exposicaoid, objetoid));
CREATE TABLE funcionario (id SERIAL NOT NULL, admissao date NOT NULL, cargo varchar(40), salario numeric(18, 3) NOT NULL, pessoaid int4 NOT NULL, setorid int4 NOT NULL, PRIMARY KEY (id));
CREATE TABLE Instituicao (id SERIAL NOT NULL, descricao varchar(40) NOT NULL, PRIMARY KEY (id));
CREATE TABLE localizacao (id SERIAL NOT NULL, rua varchar(40) NOT NULL, numero int4, bairro varchar(40) NOT NULL, complemento varchar(20), cidade varchar(40) NOT NULL, estado char(2) NOT NULL, cep int4 NOT NULL, pessoaid int4 NOT NULL, PRIMARY KEY (id));
CREATE TABLE manutencao (id SERIAL NOT NULL, objetoid int4 NOT NULL, funcionarioid int4 NOT NULL, PRIMARY KEY (id));
CREATE TABLE objeto (id SERIAL NOT NULL, descricao varchar(40) NOT NULL, aquisicao date NOT NULL, tipoid int4 NOT NULL, autorid int4 NOT NULL, setorid int4 NOT NULL, Instituicaoid int4 NOT NULL, PRIMARY KEY (id));
CREATE TABLE objeto_emprestimo (objetoid int4 NOT NULL, emprestimoid int4 NOT NULL, PRIMARY KEY (objetoid, emprestimoid));
CREATE TABLE pessoa (id SERIAL NOT NULL, nome varchar(40) NOT NULL, cpf varchar(15) NOT NULL, nascimento date NOT NULL, sexo char(1) NOT NULL, PRIMARY KEY (id));
CREATE TABLE setor (id SERIAL NOT NULL, descricao varchar(40) NOT NULL, PRIMARY KEY (id));
CREATE TABLE tipo (id SERIAL NOT NULL, descricao varchar(40) NOT NULL, PRIMARY KEY (id));
CREATE TABLE visita (id SERIAL NOT NULL, data date NOT NULL, entrada time(7) NOT NULL, saida time(7), pessoaid int4 NOT NULL, exposicaoid int4, PRIMARY KEY (id));
ALTER TABLE localizacao ADD CONSTRAINT FKlocalizaca98924 FOREIGN KEY (pessoaid) REFERENCES pessoa (id);
ALTER TABLE emprestimo ADD CONSTRAINT FKemprestimo805493 FOREIGN KEY (pessoaid) REFERENCES pessoa (id);
ALTER TABLE objeto_emprestimo ADD CONSTRAINT FKobjeto_emp838877 FOREIGN KEY (emprestimoid) REFERENCES emprestimo (id);
ALTER TABLE objeto_emprestimo ADD CONSTRAINT FKobjeto_emp624322 FOREIGN KEY (objetoid) REFERENCES objeto (id);
ALTER TABLE composicao ADD CONSTRAINT FKcomposicao847927 FOREIGN KEY (objetoid2) REFERENCES objeto (id);
ALTER TABLE objeto ADD CONSTRAINT FKobjeto616052 FOREIGN KEY (Instituicaoid) REFERENCES Instituicao (id);
ALTER TABLE objeto ADD CONSTRAINT FKobjeto766008 FOREIGN KEY (setorid) REFERENCES setor (id);
ALTER TABLE objeto ADD CONSTRAINT FKobjeto481315 FOREIGN KEY (autorid) REFERENCES autor (id);
ALTER TABLE objeto ADD CONSTRAINT FKobjeto375614 FOREIGN KEY (tipoid) REFERENCES tipo (id);
ALTER TABLE composicao ADD CONSTRAINT FKcomposicao88732 FOREIGN KEY (objetoid) REFERENCES objeto (id);
ALTER TABLE manutencao ADD CONSTRAINT FKmanutencao938630 FOREIGN KEY (objetoid) REFERENCES objeto (id);
ALTER TABLE exposicaoItem ADD CONSTRAINT FKexposicaoI489742 FOREIGN KEY (objetoid) REFERENCES objeto (id);
ALTER TABLE colecaoItem ADD CONSTRAINT FKcolecaoIte77472 FOREIGN KEY (objetoid) REFERENCES objeto (id);
ALTER TABLE agendamento ADD CONSTRAINT FKagendament541215 FOREIGN KEY (exposicaoid) REFERENCES exposicao (id);
ALTER TABLE agendamento ADD CONSTRAINT FKagendament507275 FOREIGN KEY (Instituicaoid) REFERENCES Instituicao (id);
ALTER TABLE exposicao ADD CONSTRAINT FKexposicao277951 FOREIGN KEY (localizacaoid) REFERENCES localizacao (id);
ALTER TABLE manutencao ADD CONSTRAINT FKmanutencao98433 FOREIGN KEY (funcionarioid) REFERENCES funcionario (id);
ALTER TABLE exposicaoItem ADD CONSTRAINT FKexposicaoI185650 FOREIGN KEY (exposicaoid) REFERENCES exposicao (id);
ALTER TABLE colecaoItem ADD CONSTRAINT FKcolecaoIte265270 FOREIGN KEY (colecaoid) REFERENCES colecao (id);
ALTER TABLE visita ADD CONSTRAINT FKvisita291578 FOREIGN KEY (exposicaoid) REFERENCES exposicao (id);
ALTER TABLE visita ADD CONSTRAINT FKvisita130814 FOREIGN KEY (pessoaid) REFERENCES pessoa (id);
ALTER TABLE funcionario ADD CONSTRAINT FKfuncionari456122 FOREIGN KEY (setorid) REFERENCES setor (id);
ALTER TABLE funcionario ADD CONSTRAINT FKfuncionari477785 FOREIGN KEY (pessoaid) REFERENCES pessoa (id);




/* exclui */
ALTER TABLE localizacao DROP CONSTRAINT FKlocalizaca98924;
ALTER TABLE emprestimo DROP CONSTRAINT FKemprestimo805493;
ALTER TABLE objeto_emprestimo DROP CONSTRAINT FKobjeto_emp838877;
ALTER TABLE objeto_emprestimo DROP CONSTRAINT FKobjeto_emp624322;
ALTER TABLE composicao DROP CONSTRAINT FKcomposicao847927;
ALTER TABLE objeto DROP CONSTRAINT FKobjeto616052;
ALTER TABLE objeto DROP CONSTRAINT FKobjeto766008;
ALTER TABLE objeto DROP CONSTRAINT FKobjeto481315;
ALTER TABLE objeto DROP CONSTRAINT FKobjeto375614;
ALTER TABLE composicao DROP CONSTRAINT FKcomposicao88732;
ALTER TABLE manutencao DROP CONSTRAINT FKmanutencao938630;
ALTER TABLE exposicaoItem DROP CONSTRAINT FKexposicaoI489742;
ALTER TABLE colecaoItem DROP CONSTRAINT FKcolecaoIte77472;
ALTER TABLE agendamento DROP CONSTRAINT FKagendament541215;
ALTER TABLE agendamento DROP CONSTRAINT FKagendament507275;
ALTER TABLE exposicao DROP CONSTRAINT FKexposicao277951;
ALTER TABLE manutencao DROP CONSTRAINT FKmanutencao98433;
ALTER TABLE exposicaoItem DROP CONSTRAINT FKexposicaoI185650;
ALTER TABLE colecaoItem DROP CONSTRAINT FKcolecaoIte265270;
ALTER TABLE visita DROP CONSTRAINT FKvisita291578;
ALTER TABLE visita DROP CONSTRAINT FKvisita130814;
ALTER TABLE funcionario DROP CONSTRAINT FKfuncionari456122;
ALTER TABLE funcionario DROP CONSTRAINT FKfuncionari477785;
DROP TABLE IF EXISTS agendamento CASCADE;
DROP TABLE IF EXISTS autor CASCADE;
DROP TABLE IF EXISTS colecao CASCADE;
DROP TABLE IF EXISTS colecaoItem CASCADE;
DROP TABLE IF EXISTS composicao CASCADE;
DROP TABLE IF EXISTS emprestimo CASCADE;
DROP TABLE IF EXISTS exposicao CASCADE;
DROP TABLE IF EXISTS exposicaoItem CASCADE;
DROP TABLE IF EXISTS funcionario CASCADE;
DROP TABLE IF EXISTS Instituicao CASCADE;
DROP TABLE IF EXISTS localizacao CASCADE;
DROP TABLE IF EXISTS manutencao CASCADE;
DROP TABLE IF EXISTS objeto CASCADE;
DROP TABLE IF EXISTS objeto_emprestimo CASCADE;
DROP TABLE IF EXISTS pessoa CASCADE;
DROP TABLE IF EXISTS setor CASCADE;
DROP TABLE IF EXISTS tipo CASCADE;
DROP TABLE IF EXISTS visita CASCADE;
